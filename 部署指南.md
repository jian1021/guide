# 部署指南

## 一、本地测试（开发环境）

### 方法1：直接打开
1. 找到 `index.html` 文件
2. 双击打开（默认浏览器会自动打开）
3. 测试所有功能是否正常

### 方法2：使用Python服务器（推荐）
```bash
# 进入项目目录
cd "c:\Users\Administrator\Desktop\市场监管局二维码网站"

# 启动服务器
python -m http.server 8080

# 浏览器访问
http://localhost:8080
```

---

## 二、部署到Web服务器

### 方案1：Nginx部署（推荐）

#### 1. 安装Nginx
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install nginx

# CentOS/RHEL
sudo yum install nginx
```

#### 2. 配置Nginx
编辑配置文件：`/etc/nginx/sites-available/scjgj`

```nginx
server {
    listen 80;
    server_name your-domain.com;  # 替换为你的域名
    
    root /var/www/scjgj;  # 项目文件路径
    index index.html;
    
    location / {
        try_files $uri $uri/ =404;
    }
    
    # 开启gzip压缩
    gzip on;
    gzip_types text/css application/javascript application/json;
    
    # 设置缓存
    location ~* \.(css|js|jpg|png|gif|ico)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
}
```

#### 3. 上传文件
```bash
# 创建目录
sudo mkdir -p /var/www/scjgj

# 上传所有文件到服务器
# 使用FTP、SCP或其他方式上传

# 设置权限
sudo chown -R www-data:www-data /var/www/scjgj
sudo chmod -R 755 /var/www/scjgj
```

#### 4. 启用配置并重启
```bash
# 创建软链接
sudo ln -s /etc/nginx/sites-available/scjgj /etc/nginx/sites-enabled/

# 测试配置
sudo nginx -t

# 重启Nginx
sudo systemctl restart nginx
```

---

### 方案2：Apache部署

#### 1. 安装Apache
```bash
# Ubuntu/Debian
sudo apt-get install apache2

# CentOS/RHEL
sudo yum install httpd
```

#### 2. 配置虚拟主机
编辑：`/etc/apache2/sites-available/scjgj.conf`

```apache
<VirtualHost *:80>
    ServerName your-domain.com
    DocumentRoot /var/www/scjgj
    
    <Directory /var/www/scjgj>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    ErrorLog ${APACHE_LOG_DIR}/scjgj_error.log
    CustomLog ${APACHE_LOG_DIR}/scjgj_access.log combined
</VirtualHost>
```

#### 3. 启用配置
```bash
# 启用站点
sudo a2ensite scjgj

# 重启Apache
sudo systemctl restart apache2
```

---

### 方案3：使用免费托管服务

#### GitHub Pages（免费）
1. 创建GitHub账号并新建仓库
2. 上传所有文件到仓库
3. 进入仓库设置 → Pages
4. 选择分支和目录，保存
5. 访问：https://username.github.io/仓库名

#### Gitee Pages（国内访问快）
1. 创建Gitee账号并新建仓库
2. 上传所有文件
3. 服务 → Gitee Pages
4. 启动服务
5. 访问提供的网址

#### Vercel（免费，速度快）
1. 访问 https://vercel.com
2. 连接GitHub账号
3. 导入项目
4. 自动部署
5. 获得访问链接

---

## 三、配置HTTPS（SSL证书）

### 使用Let's Encrypt免费证书

#### 1. 安装Certbot
```bash
# Ubuntu/Debian
sudo apt-get install certbot python3-certbot-nginx

# CentOS/RHEL
sudo yum install certbot python3-certbot-nginx
```

#### 2. 获取证书
```bash
sudo certbot --nginx -d your-domain.com
```

#### 3. 自动续期
```bash
# 测试续期
sudo certbot renew --dry-run

# 添加定时任务
sudo crontab -e
# 添加以下行
0 3 * * * certbot renew --quiet
```

---

## 四、生成二维码

### 在线生成工具

#### 草料二维码（推荐）
1. 访问：https://cli.im/
2. 输入网站地址
3. 选择样式和尺寸
4. 下载二维码图片

#### 联图二维码
1. 访问：https://www.wwei.cn/
2. 输入URL
3. 自定义样式
4. 下载使用

### 命令行生成
```bash
# 安装qrencode
sudo apt-get install qrencode

# 生成二维码
qrencode -o qrcode.png "http://your-domain.com"
```

---

## 五、性能优化

### 1. 启用Gzip压缩
已在Nginx配置中包含

### 2. 使用CDN加速
- 阿里云CDN
- 腾讯云CDN
- Cloudflare（免费）

### 3. 图片优化
目前网站无图片，如需添加：
- 使用WebP格式
- 压缩图片大小
- 使用懒加载

### 4. 代码压缩
```bash
# 安装工具
npm install -g html-minifier clean-css-cli uglify-js

# 压缩HTML
html-minifier --collapse-whitespace --remove-comments index.html -o index.min.html

# 压缩CSS
cleancss css/style.css -o css/style.min.css

# 压缩JS
uglifyjs js/main.js -o js/main.min.js
uglifyjs js/data.js -o js/data.min.js
```

---

## 六、监控和维护

### 1. 访问日志
```bash
# Nginx日志位置
/var/log/nginx/access.log
/var/log/nginx/error.log

# 实时查看
tail -f /var/log/nginx/access.log
```

### 2. 定期检查
- 检查外部链接是否有效
- 更新办事项数据
- 查看访问统计
- 检查证书有效期

### 3. 备份
```bash
# 备份网站文件
tar -czf scjgj_backup_$(date +%Y%m%d).tar.gz /var/www/scjgj

# 定时备份
0 2 * * * tar -czf /backup/scjgj_$(date +\%Y\%m\%d).tar.gz /var/www/scjgj
```

---

## 七、域名配置

### 1. 购买域名
- 阿里云万网
- 腾讯云DNSPod
- 其他域名注册商

### 2. DNS解析
```
A记录配置：
主机记录: @
记录类型: A
记录值: 服务器IP地址
TTL: 600

www记录：
主机记录: www
记录类型: CNAME
记录值: @
TTL: 600
```

---

## 八、安全建议

1. ✅ 使用HTTPS加密传输
2. ✅ 定期更新系统和软件
3. ✅ 配置防火墙
4. ✅ 限制访问来源（如需要）
5. ✅ 定期备份数据
6. ✅ 监控异常访问

---

## 九、故障排查

### 网站无法访问
```bash
# 检查Nginx状态
sudo systemctl status nginx

# 检查端口占用
sudo netstat -tlnp | grep :80

# 检查防火墙
sudo ufw status
sudo firewall-cmd --list-all
```

### 样式加载失败
- 检查文件路径是否正确
- 检查文件权限
- 查看浏览器控制台错误信息

### 链接无法跳转
- 检查URL是否正确
- 测试外部链接是否有效
- 查看浏览器控制台

---

## 十、联系支持

如遇到问题，可以：
1. 查看 README.md 详细文档
2. 查看使用说明.txt
3. 检查浏览器控制台错误
4. 联系技术支持

---

**部署完成后，记得：**
1. ✅ 测试所有功能
2. ✅ 生成二维码
3. ✅ 检查移动端显示
4. ✅ 记录访问地址
5. ✅ 配置自动备份

---

版本：v1.0.0  
更新时间：2025-10-17
